(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-809525e4"],{"0507":function(t,e,n){var r=n("5dda"),a=n("8e99"),i=n("5e43")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),r(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}},"0a5d":function(t,e,n){var r=n("5dda");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},"0db0":function(t,e,n){"use strict";var r=n("c877"),a=n("3427"),i=n("8cfa"),o=n("f988"),s=n("3c27"),c=n("bfbe"),u=n("7761"),f=n("2b24"),l=n("5dda"),d=n("100c"),h=n("5f23").f,v=n("b063")(0),p=n("f388");t.exports=function(t,e,n,b,m,y){var _=r[t],w=_,g=m?"set":"add",x=w&&w.prototype,k={};return p&&"function"==typeof w&&(y||x.forEach&&!o(function(){(new w).entries().next()}))?(w=e(function(e,n){f(e,w,t,"_c"),e._c=new _,void 0!=n&&u(n,m,e[g],e)}),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in x&&(!y||"clear"!=t)&&s(w.prototype,t,function(n,r){if(f(this,w,t),!e&&y&&!l(n))return"get"==t&&void 0;var a=this._c[t](0===n?0:n,r);return e?this:a})}),y||h(w.prototype,"size",{get:function(){return this._c.size}})):(w=b.getConstructor(e,t,m,g),c(w.prototype,n),i.NEED=!0),d(w,t),k[t]=w,a(a.G+a.W+a.F,k),y||b.setStrong(w,t,m),w}},"17b90":function(t,e,n){"use strict";var r=n("685b"),a=n("0a5d"),i="Set";t.exports=n("0db0")(i,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(a(this,i),t=0===t?0:t,t)}},r)},"1fa6":function(t,e,n){"use strict";var r=n("49d7"),a=n.n(r);a.a},"296e":function(t,e,n){"use strict";var r=n("3427");t.exports=function(t){r(r.S,t,{of:function(){var t=arguments.length,e=new Array(t);while(t--)e[t]=arguments[t];return new this(e)}})}},"2cd8":function(t,e,n){n("0190"),n("1bdf"),n("17b9"),n("17b90"),n("be6b"),n("cf92"),n("91d7"),t.exports=n("7f8a").Set},"386e":function(t,e,n){},"49d7":function(t,e,n){},"5f97":function(t,e,n){"use strict";var r=n("3427"),a=n("04ed"),i=n("9015"),o=n("7761");t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,c=arguments[1];return a(this),e=void 0!==c,e&&a(c),void 0==t?new this:(n=[],e?(r=0,s=i(c,arguments[2],2),o(t,!1,function(t){n.push(s(t,r++))})):o(t,!1,n.push,n),new this(n))}})}},"685b":function(t,e,n){"use strict";var r=n("5f23").f,a=n("f6dc"),i=n("bfbe"),o=n("9015"),s=n("2b24"),c=n("7761"),u=n("9816"),f=n("be64"),l=n("bd12"),d=n("f388"),h=n("8cfa").fastKey,v=n("0a5d"),p=d?"_s":"size",b=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var f=t(function(t,r){s(t,f,e,"_i"),t._t=e,t._i=a(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=r&&c(r,n,t[u],t)});return i(f.prototype,{clear:function(){for(var t=v(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var n=v(this,e),r=b(n,t);if(r){var a=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=a),a&&(a.p=i),n._f==r&&(n._f=a),n._l==r&&(n._l=i),n[p]--}return!!r},forEach:function(t){v(this,e);var n,r=o(t,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(t){return!!b(v(this,e),t)}}),d&&r(f.prototype,"size",{get:function(){return v(this,e)[p]}}),f},def:function(t,e,n){var r,a,i=b(t,e);return i?i.v=n:(t._l=i={i:a=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[p]++,"F"!==a&&(t._i[a]=i)),t},getEntry:b,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=v(t,e),this._k=n,this._l=void 0},function(){var t=this,e=t._k,n=t._l;while(n&&n.r)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?f(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),l(e)}}},"857a":function(t,e,n){var r=n("0507");t.exports=function(t,e){return new(r(t))(e)}},"90d9":function(t,e,n){t.exports=n("2cd8")},"91d7":function(t,e,n){n("5f97")("Set")},ad9c:function(t,e,n){var r=n("7761");t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},b063:function(t,e,n){var r=n("9015"),a=n("3ac8"),i=n("6dae"),o=n("5a55"),s=n("857a");t.exports=function(t,e){var n=1==t,c=2==t,u=3==t,f=4==t,l=6==t,d=5==t||l,h=e||s;return function(e,s,v){for(var p,b,m=i(e),y=a(m),_=r(s,v,3),w=o(y.length),g=0,x=n?h(e,w):c?h(e,0):void 0;w>g;g++)if((d||g in y)&&(p=y[g],b=_(p,g,m),t))if(n)x[g]=b;else if(b)switch(t){case 3:return!0;case 5:return p;case 6:return g;case 2:x.push(p)}else if(f)return!1;return l?-1:u||f?f:x}}},b7af:function(t,e,n){var r=n("587f"),a=n("ad9c");t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return a(this)}}},be6b:function(t,e,n){var r=n("3427");r(r.P+r.R,"Set",{toJSON:n("b7af")("Set")})},caae:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"toolBar",attrs:{flex:"main:justify cross:center"}},[n("p",{staticStyle:{width:"70%"},attrs:{flex:"cross:center"}},[n("span",[t._v("命令输入：")]),n("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"通过输入 “ [员工缩写] [工种] [数量] ” 进行连续快速计单（之间用空格隔开）"},nativeOn:{keydown:function(e){return t.doCommand(e)}},model:{value:t.cmd,callback:function(e){t.cmd="string"===typeof e?e.trim():e},expression:"cmd"}})],1),n("p",{attrs:{flex:"cross:center"}},[n("span",{staticStyle:{"padding-right":"10px"}},[t._v("切换到"+t._s(t.ifCharts?"表格模式":"图表模式")+"：")]),n("i",{class:t.ifCharts?"el-icon-tickets":"el-icon-picture-outline",on:{click:t.switchMode}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.ifCharts,expression:"ifCharts"}]},[n("div",{attrs:{id:"chart"}})]),n("el-table",{directives:[{name:"show",rawName:"v-show",value:!t.ifCharts,expression:"!ifCharts"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","max-height":600}},[n("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"员工/工种",width:"100",prop:"name",fixed:"",align:"center"}}),t._l(t.itemList,function(e){return n("el-table-column",{key:e.name,attrs:{label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("input",{directives:[{name:"model",rawName:"v-model",value:e.row[e.column.label],expression:"scope.row[scope.column.label]"}],staticClass:"cellInput",attrs:{type:"number"},domProps:{value:e.row[e.column.label]},on:{change:function(n){t.recordByTable(e.row.name,e.column.label,n)},focus:function(t){t.currentTarget.select()},input:function(n){n.target.composing||t.$set(e.row,e.column.label,n.target.value)}}})]}}])})})],2)],1)},a=[],i=(n("0be8"),n("c839"),n("d49d"),n("3f87"),n("90d9")),o=n.n(i),s=n("7fc4"),c=n("3506"),u=n("1663"),f=n("efd6"),l=n("0c40"),d=n("36ad"),h=(n("3cbd"),n("d9c6"),n("aea7")),v=n.n(h),p=(n("6f02"),n("ab07")),b=n.n(p),m=(n("7861"),n("20c5")),y=n.n(m),_=(n("ff66"),n("ea23"),n("dbff"),n("3a61")),w=n("3a00"),g=(n("386e"),n("9b47")),x=n("2f33"),k=n("4bee"),C=n("40ba"),$=n("7c93"),S=n.n($),E=function(){var t=new S.a.Chart({container:"chart",forceFit:!0,height:620});return t.source([]),t.coord("rect").transpose(),t.intervalStack().position("name*数量").color("工种").style({cursor:"pointer"}),t.render(),t.on("interval:click",function(t){console.log(t)}),t};w["default"].use(y.a),w["default"].use(b.a),w["default"].use(v.a);var O=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(f["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.name="Record",t}return Object(d["a"])(e,t),Object(u["a"])(e,[{key:"data",value:function(){return{itemList:[],staffList:[],tableData:[],ifCharts:!0,chart:null,cmd:""}}},{key:"mounted",value:function(){this.$data.chart=E(),this.$data.itemList=k["b"](),this.$data.staffList=k["d"](),this.freshTable()}},{key:"freshTable",value:function(){var t=this,e=k["c"]({date:new Date,unit:"day",action:"PIECE_RECORD"}),n=k["d"](),r=Object(s["a"])(new o.a(e.map(function(t){return{name:t.staff}})));e.forEach(function(e){var a=n.findIndex(function(t){return t.name===e.staff}),i=r.findIndex(function(t){return t.name===e.staff});-1!==a&&(n[a][e.type]=t.$NP.plus(n[a][e.type]||0,e.num)),-1!==i&&(r[i][e.type]=t.$NP.plus(r[i][e.type]||0,e.num))});var a=(new C["View"]).source(r);a.transform({type:"fold",fields:Object(s["a"])(new o.a(e.map(function(t){return t.type}))),key:"工种",value:"数量",retains:["name"]}),this.$data.chart.changeData(a.rows),this.$set(this.$data,"tableData",n)}},{key:"switchMode",value:function(){this.$data.ifCharts=!this.$data.ifCharts,this.freshTable()}},{key:"cellClick",value:function(t,e,n){this.$set(this.$data,"activeCell",{row:t.name,column:e.label,value:t.time})}},{key:"recordByTable",value:function(t,e,n){var r=this;x["b"]({type:e,num:n.target.value,staff:t}).then(function(t){return r.freshTable()}).catch(function(t){return t})}},{key:"doCommand",value:function(t){var e=this;if(13===t.keyCode){var n=this.$data.cmd.split(" ");if(3!==n.length)this.$MessageBox.alert("命令格式错误","提示");else{var r=n[0],a=n[1],i=n[2],o=this.$data.staffList.findIndex(function(t){return t.short===r});if(-1===o)this.$MessageBox.alert("您输入的员工不存在，请检查后重试","提示");else{var s=this.$data.staffList[o].name;x["d"]({type:a,num:i,staff:s}).then(function(){return e.freshTable()}).catch(function(t){return t})}}this.$set(this.$data,"cmd","")}}}]),e}(w["default"]);O=_["a"]([g["a"]],O);var T=O,j=T,N=(n("1fa6"),n("048f")),D=Object(N["a"])(j,r,a,!1,null,"2331d558",null);D.options.__file="index.vue";e["default"]=D.exports},cf92:function(t,e,n){n("296e")("Set")}}]);
//# sourceMappingURL=chunk-809525e4.e0e7a756.js.map