{"version":3,"sources":["webpack:///./src/views/comparison/index.scss","webpack:///./src/views/comparison/index.vue?b7b2","webpack:///./src/views/comparison/g2.ts","webpack:///./src/views/comparison/index.ts","webpack:///./src/views/comparison/index.ts?16b8","webpack:///./src/views/comparison/index.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_index_scss_vue_type_style_index_0_id_230e7ef9_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_index_scss_vue_type_style_index_0_id_230e7ef9_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","flex","staticStyle","padding-right","_v","width","margin-right","type","size","clearable","placeholder","value-format","on","change","freshCharts","model","value","callback","$$v","month","expression","id","staticRenderFns","g2","chart","external_G2_default","a","Chart","container","forceFit","height","source","legend","custom","allowAllCanceled","items","marker","symbol","fill","radius","stroke","lineWidth","interval","position","color","style","cursor","line","shape","point","vue_runtime_esm","use","lib_input_default","lib_date_picker_default","comparisonvue_type_script_lang_ts_Comparison","_Vue","Comparison","_this","Object","classCallCheck","name","inherits","createClass","key","external_dayjs_default","format","_this2","$data","env","data","_origin","$router","push","params","action","_this3","chartData","pieceRecordList","Fetch","date","unit","exportRecordList","length","forEach","item","targetIndex","findIndex","计单","出货","$NP","plus","num","max","Math","apply","map","scale","changeData","tslib_es6","vue_property_decorator","comparisonvue_type_script_lang_ts_","views_comparisonvue_type_script_lang_ts_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-cdd8a5cc.1ed1c2db.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!./index.scss?vue&type=style&index=0&id=230e7ef9&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!./index.scss?vue&type=style&index=0&id=230e7ef9&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comparisonContainer\"},[_c('div',{attrs:{\"flex\":\"main:right cross:center\"}},[_c('span',{staticStyle:{\"padding-right\":\"20px\"}},[_vm._v(\"月份：\")]),_c('el-date-picker',{staticStyle:{\"width\":\"120px\",\"margin-right\":\"20px\"},attrs:{\"type\":\"month\",\"size\":\"small\",\"clearable\":false,\"placeholder\":\"选择月\",\"value-format\":\"yyyy-MM\"},on:{\"change\":_vm.freshCharts},model:{value:(_vm.month),callback:function ($$v) {_vm.month=$$v},expression:\"month\"}})],1),_c('div',{attrs:{\"id\":\"chart\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import G2 from '@antv/g2'\r\nimport Slider from '@antv/g2-plugin-slider'\r\n\r\nexport default function () {\r\n  const chart = new G2.Chart({\r\n    container: 'chart',\r\n    forceFit: true,\r\n    height: 600\r\n  })\r\n  chart.source([])\r\n  chart.legend({\r\n    custom: true,\r\n    allowAllCanceled: true,\r\n    items: [\r\n      {\r\n        value: '计单',\r\n        marker: { symbol: 'square', fill: '#3182bd', radius: 5 }\r\n      },\r\n      {\r\n        value: '出货',\r\n        marker: { symbol: 'hyphen', stroke: '#fdae6b', radius: 5, lineWidth: 3 }\r\n      }\r\n    ]\r\n  })\r\n\r\n  chart\r\n    .interval()\r\n    .position('type*计单')\r\n    .color('#3182bd')\r\n    .style({\r\n      cursor: 'pointer'\r\n    })\r\n  chart\r\n    .line()\r\n    .position('type*出货')\r\n    .color('#fdae6b')\r\n    .size(3)\r\n    .shape('smooth')\r\n  chart\r\n    .point()\r\n    .position('type*出货')\r\n    .color('#fdae6b')\r\n    .size(3)\r\n    .shape('circle')\r\n    .style({\r\n      cursor: 'pointer'\r\n    })\r\n  chart.render()\r\n\r\n  // const slider = new Slider({\r\n  //   container: 'slider', // dom 容器 id 或者 dom 容器对象\r\n  //   width: 600, // slider 的宽度，默认为 'auto'，即自适应宽度\r\n  //   height: 26, // slider 的高度，默认为 '26px'\r\n  //   padding: [ 20, 120, 100 ], // slider 所在画布 canvas 的内边距，用于对齐图表，默认与图表默认的 padding 相同\r\n  //   start: '2015-04-07', // 和状态量对应，滑块的起始点数值，如果是时间类型，建议将其转换为时间戳，方便数据过滤\r\n  //   end: '2015-08-01', // 和状态量对应，滑块的结束点数值，如果是时间类型，建议将其转换为时间戳，方便数据过滤\r\n  //   minSpan: 30 * 24 * 60 * 60 * 1000, // 可选，用于设置滑块的最小范围，时间类型的数值必须使用时间戳，这里设置最小范围为 30 天\r\n  //   maxSpan: 120 * 24 * 60 * 60 * 1000, // 可选，用于设置滑块的最大范围，时间类型的数值必须使用时间戳，这里设置最大范围为 120 天\r\n  //   data: [], // slider 的数据源\r\n  //   xAxis: 'time', // 背景图的横轴对应字段，同时为数据筛选的字段\r\n  //   yAxis: 'volumn' // 背景图的纵轴对应字段\r\n  //   // onChange: ({ startValue, endValue }) => {\r\n  //   //   ds.setState('start', startValue)\r\n  //   //   ds.setState('end', endValue)\r\n  //   // } // 更新数据状态量的回调函数\r\n  // })\r\n  // slider.render() // 渲染\r\n\r\n  return chart\r\n}\r\n","import Vue from 'vue'\r\nimport './index.scss'\r\nimport { Component } from 'vue-property-decorator'\r\nimport { Input, DatePicker } from 'element-ui'\r\nimport * as Fetch from '@/utils/Fetch'\r\nimport dayjs from 'dayjs'\r\nimport { IRecord } from '@/declare'\r\nimport { IComparisonItem } from './declare.d'\r\nimport G2Init from './g2'\r\n\r\nVue.use(Input)\r\nVue.use(DatePicker)\r\n\r\n@Component\r\nexport default class Comparison extends Vue {\r\n  name = 'Comparison'\r\n  data () {\r\n    return {\r\n      chart: null,\r\n      month: dayjs().format('YYYY-MM')\r\n    }\r\n  }\r\n  mounted () {\r\n    this.$data.chart = G2Init()\r\n    this.$data.chart.on('interval:dblclick', (env: any) => {\r\n      const { type } = env.data._origin\r\n      this.$router.push({ name: 'search',params: {\r\n        action: 'GOODS_EXPORT',\r\n        type: type,\r\n        month: this.$data.month\r\n      } })\r\n    })\r\n    this.$data.chart.on('point:dblclick', (env: any) => {\r\n      const { type } = env.data._origin\r\n      this.$router.push({ name: 'search',params: {\r\n        action: 'PIECE_RECORD',\r\n        type: type,\r\n        month: this.$data.month\r\n      } })\r\n    })\r\n    this.freshCharts()\r\n  }\r\n\r\n  freshCharts () {\r\n    let chartData: IComparisonItem[] = []\r\n    const pieceRecordList: IRecord[] = Fetch.recordFilter({ date: this.$data.month, unit: 'month', action: 'PIECE_RECORD' })\r\n    const exportRecordList: IRecord[] = Fetch.recordFilter({ date: this.$data.month, unit: 'month', action: 'GOODS_EXPORT' })\r\n    if (pieceRecordList.length > 0 || exportRecordList.length > 0) {\r\n      exportRecordList.forEach((item: IRecord) => {\r\n        let targetIndex = chartData.findIndex((data: IComparisonItem) => data.type === item.type)\r\n        if (targetIndex === -1) {\r\n          chartData.push({ type: item.type, '计单': 0, '出货': 0 })\r\n          targetIndex = chartData.length - 1\r\n        }\r\n        chartData[targetIndex]['出货'] = this.$NP.plus(chartData[targetIndex]['出货'], item.num)\r\n      })\r\n      pieceRecordList.forEach((item: IRecord) => {\r\n        let targetIndex = chartData.findIndex((data: IComparisonItem) => data.type === item.type)\r\n        if (targetIndex === -1) {\r\n          chartData.push({ type: item.type, '计单': 0, '出货': 0 })\r\n          targetIndex = chartData.length - 1\r\n        }\r\n        chartData[targetIndex]['计单'] = this.$NP.plus(chartData[targetIndex]['计单'], item.num)\r\n      })\r\n      const max = Math.max.apply(Math, chartData.map((item: IComparisonItem) => Math.max(item['出货'], item['计单'])))\r\n      this.$data.chart.scale('计单', { max: max })\r\n      this.$data.chart.scale('出货', { max: max })\r\n      this.$data.chart.changeData(chartData)\r\n    } else {\r\n      this.$data.chart.changeData([])\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!./index.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!./index.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=230e7ef9&scoped=true&\"\nimport script from \"./index.ts?vue&type=script&lang=ts&\"\nexport * from \"./index.ts?vue&type=script&lang=ts&\"\nimport style0 from \"./index.scss?vue&type=style&index=0&id=230e7ef9&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"230e7ef9\",\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports"],"sourceRoot":""}