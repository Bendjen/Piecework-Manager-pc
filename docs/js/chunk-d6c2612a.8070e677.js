(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6c2612a"],{"0faa":function(t,e,a){"use strict";var n=a("4e6b"),i=a.n(n);i.a},"4e6b":function(t,e,a){},"99ac":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"deliveryContainer"},[a("div",{staticClass:"toolBar",attrs:{flex:"main:justify cross:center"}},[a("p",{staticStyle:{width:"70%"},attrs:{flex:"cross:center"}},[a("span",[t._v("命令输入：")]),a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"通过输入 “ [工种] [数量] ” 进行连续快速计单（之间用空格隔开）"},nativeOn:{keydown:function(e){return t.doCommand(e)}},model:{value:t.cmd,callback:function(e){t.cmd="string"===typeof e?e.trim():e},expression:"cmd"}})],1),a("p",[a("i",{staticClass:"el-icon-plus",staticStyle:{"padding-right":"15px"},on:{click:function(e){t.addItemDialog=!0}}}),a("i",{staticClass:"el-icon-setting",on:{click:function(e){t.itemListDialog=!0}}})])]),a("div",{attrs:{id:"chart"}}),a("el-dialog",{attrs:{title:"添加型号",visible:t.addItemDialog,width:"25%"},on:{"update:visible":function(e){t.addItemDialog=e}}},[a("div",[a("p",{staticClass:"line",attrs:{flex:"main:center cross:center"}},[a("span",[t._v("型号名称：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入型号名称"},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name","string"===typeof e?e.trim():e)},expression:"newItem.name"}})],1),a("p",{staticClass:"line",attrs:{flex:"main:center cross:center"}},[a("span",[t._v("单价：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"请输入型号单价"},model:{value:t.newItem.price,callback:function(e){t.$set(t.newItem,"price","string"===typeof e?e.trim():e)},expression:"newItem.price"}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addItemDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:!(t.newItem.name&&t.newItem.price)},on:{click:t.addItem}},[t._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"型号管理",visible:t.itemListDialog,width:"30%"},on:{"update:visible":function(e){t.itemListDialog=e}}},[t.itemList.length>0?a("div",[a("p",{staticClass:"itemLine",attrs:{flex:"main:center cross:center"}},[a("span",[t._v("序号")]),a("span",[t._v("名称")]),a("span",[t._v("价格")]),a("span",[t._v("操作")])]),a("div",{staticStyle:{"max-height":"400px","overflow-y":"auto"}},t._l(t.itemList,function(e,n){return a("p",{key:n,staticClass:"itemLine",attrs:{flex:"main:center cross:center"}},[a("span",[t._v(t._s(n+1))]),a("input",{staticClass:"opacityInput",attrs:{type:"text"},domProps:{value:e.name},on:{click:function(t){t.currentTarget.select()},change:function(a){t.changeName(e.name,a)}}}),a("input",{staticClass:"opacityInput",attrs:{type:"number"},domProps:{value:e.price},on:{click:function(t){t.currentTarget.select()},change:function(a){t.changePrice(e.name,a)}}}),a("i",{staticClass:"el-icon-close",on:{click:function(a){t.deleteItem(e.name)}}})])}))]):a("div",{attrs:{flex:"main:center cross:center"}},[a("p",{staticStyle:{"font-size":"16px"}},[t._v("没有任何型号,\n        "),a("span",{staticStyle:{color:"#4089ca","text-decoration":"underline",cursor:"pointer"},on:{click:function(e){t.addItemDialog=!0}}},[t._v("去添加")])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.itemListDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:!(t.newItem.name&&t.newItem.price)},on:{click:t.addItem}},[t._v("确 定")])],1)])],1)},i=[],c=a("be94"),s=(a("28a5"),a("d4ec")),l=a("bee2"),r=a("99de"),o=a("7e84"),u=a("262e"),m=(a("10cb"),a("450d"),a("f3ad")),d=a.n(m),f=(a("5466"),a("ecdf")),p=a.n(f),h=(a("38a0"),a("ad41")),v=a.n(h),b=(a("cadf"),a("551c"),a("097d"),a("9ab4")),I=a("2b0e"),g=(a("ba5e"),a("60a3")),y=(a("20d6"),a("46a1"),a("e5f2")),k=a.n(y),_=a("2909"),w=(a("9e1f"),a("6ed5")),x=a.n(w),T=(a("7514"),a("7f7f"),a("b6a7")),L=a.n(T);function C(t){var e=t.name,a=t.price,n=t.callback,i=L.a.get("ITEM_TYPE_LIST")||[],c={name:e,price:a};if(i.find(function(t){return t.name===e}))return x.a.alert("添加失败，已存在同名型号","提示").catch(function(t){return t}),!1;L.a.set("ITEM_TYPE_LIST",Object(_["a"])(i).concat([c])),k.a.success({message:"添加型号 ".concat(e),title:"成功"}),n&&n()}function E(t){var e=t.name,a=t.callback,n=L.a.get("ITEM_TYPE_LIST")||[],i=n.findIndex(function(t){return t.name===e});n.splice(i),L.a.set("ITEM_TYPE_LIST",n),k.a.success({message:"删除型号 ".concat(e),title:"成功"}),a&&a()}function $(t){var e=t.preName,a=t.newName,n=t.callback,i=L.a.get("ITEM_TYPE_LIST")||[],s=i.findIndex(function(t){return t.name===e}),l=Object(c["a"])({},i[s],{name:a});i.splice(s,1,l),L.a.set("ITEM_TYPE_LIST",i),k.a.success({message:"型号 ".concat(e," 变更为 ").concat(a," "),title:"成功"}),n&&n()}function S(t){var e=t.name,a=t.price,n=t.callback,i=L.a.get("ITEM_TYPE_LIST")||[],s=i.findIndex(function(t){return t.name===e}),l=Object(c["a"])({},i[s],{price:a}),r=i[s].price;i.splice(s,1,l),L.a.set("ITEM_TYPE_LIST",i),k.a.success({message:"型号 ".concat(e," 价格由 ").concat(r," 分，变更为 ").concat(a," 分"),title:"成功"}),n&&n()}var D=a("4bee"),M=a("2f33"),P=a("7c93"),j=a.n(P),O=function(){var t=new j.a.Chart({container:"chart",forceFit:!0,height:600});return t.source([]),t.interval().position("type*num").color("type").label("num",{labelEmit:!0,textStyle:{fill:"#8c8c8c"}}),t.render(),t};I["default"].use(v.a),I["default"].use(p.a),I["default"].use(d.a);var Y=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(r["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.name="Delivery",t}return Object(u["a"])(e,t),Object(l["a"])(e,[{key:"data",value:function(){return{chart:null,addItemDialog:!1,itemListDialog:!1,itemList:[],cmd:"",newItem:{name:"",price:""}}}},{key:"mounted",value:function(){this.$data.chart=O(),this.freshItemList(),this.freshTable()}},{key:"freshItemList",value:function(){this.$set(this.$data,"itemList",D["b"]())}},{key:"freshTable",value:function(){var t=D["a"](new Date,"day");this.$data.chart.scale("num",{max:Math.max.apply(Math,t.map(function(t){return t.num}))}),this.$data.chart.changeData(t)}},{key:"doCommand",value:function(t){var e=this;if(13===t.keyCode){var a=this.$data.cmd.split(" ");if(2!==a.length)this.$MessageBox.alert("命令格式错误","提示");else{var n=a[0],i=a[1];M["c"]({type:n,num:i}).then(function(){e.freshTable()}).catch(function(t){return t})}e.$set(this.$data,"cmd","")}}},{key:"addItem",value:function(){var t=this;C(Object(c["a"])({},this.$data.newItem,{callback:function(){t.$set(t.$data,"newItem",{name:"",price:""}),t.$set(t.$data,"addItemDialog",!1),t.freshItemList()}}))}},{key:"deleteItem",value:function(t){var e=this;this.$MessageBox.confirm("确定要删除该型号吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){E({name:t,callback:function(){e.freshItemList()}})})}},{key:"changeName",value:function(t,e){var a=this;$({preName:t,newName:e.target.value,callback:function(){a.freshItemList()}})}},{key:"changePrice",value:function(t,e){var a=this;S({name:t,price:e.target.value,callback:function(){a.freshItemList()}})}}]),e}(I["default"]);Y=b["a"]([g["a"]],Y);var N=Y,B=N,J=(a("0faa"),a("2877")),z=Object(J["a"])(B,n,i,!1,null,null,null);z.options.__file="index.vue";e["default"]=z.exports},ba5e:function(t,e,a){}}]);
//# sourceMappingURL=chunk-d6c2612a.8070e677.js.map